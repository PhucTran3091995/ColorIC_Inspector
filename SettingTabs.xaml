<UserControl x:Class="ColorIC_Inspector.SettingTabs"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="768" d:DesignWidth="1366">
    <UserControl.Resources>
        <!-- Define missing brush resources -->
        <SolidColorBrush x:Key="TextSecondary" Color="#9CA3AF"/>
        <SolidColorBrush x:Key="BgPanel" Color="#1E293B"/>
        <!-- Added missing BgPanel resource -->
        <SolidColorBrush x:Key="BorderColor" Color="#4B5563"/>
        <SolidColorBrush x:Key="BgInput" Color="#0F172A"/>
        <SolidColorBrush x:Key="Success" Color="#10B981"/>
        <SolidColorBrush x:Key="BgDark" Color="#071223"/>
        <SolidColorBrush x:Key="Error" Color="#EF4444"/>
    </UserControl.Resources>
    <Grid>
        <!-- LOGIN OVERLAY -->
        <Grid x:Name="pnlLogin" Background="{DynamicResource BgDark}" Visibility="Collapsed" Panel.ZIndex="100">
            <Border Background="{DynamicResource BgPanel}" CornerRadius="8" Width="400" Height="350" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                <StackPanel Margin="40" VerticalAlignment="Center">
                    <TextBlock Text="SYSTEM LOCKED" FontSize="24" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,30"/>
                    <TextBlock Text="Password" Foreground="{DynamicResource TextSecondary}" Margin="0,0,0,5"/>
                    <PasswordBox x:Name="txtPassword" Height="40" Background="{DynamicResource BgInput}" Foreground="White" BorderBrush="{DynamicResource BorderColor}" Padding="10,5" Margin="0,0,0,20"/>
                    <Button Content="UNLOCK SETTINGS" Height="45" Click="btnLogin_Click"/>
                    <TextBlock x:Name="txtLoginError" Foreground="{DynamicResource Error}" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- SETTINGS CONTENT -->
        <ScrollViewer VerticalScrollBarVisibility="Auto" Background="{DynamicResource BgPanel}" Margin="0,22,0,-22">
            <StackPanel Margin="40" MaxWidth="900" HorizontalAlignment="Center">
                <DockPanel Margin="0,0,0,30">
                    <Button Content="LOCK SYSTEM" DockPanel.Dock="Right" Background="{DynamicResource BorderColor}" Width="120" Click="btnLogout_Click"/>
                    <TextBlock Text="System Configuration" FontSize="28" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                </DockPanel>

                <!-- General Parameters -->
                <Border Background="{DynamicResource BgPanel}" CornerRadius="8" Padding="20" Margin="0,0,0,20" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="General Parameters" FontSize="18" FontWeight="Bold" Foreground="#60A5FA" Margin="0,0,0,15"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="EBR Type" Foreground="{DynamicResource TextSecondary}" Margin="0,0,0,5"/>
                                <ComboBox x:Name="cbEBR" Height="34" Foreground="{DynamicResource BorderColor}">
                                    <ComboBox.Background>
                                        <LinearGradientBrush EndPoint="0,1">
                                            <GradientStop Color="#FFF0F0F0"/>
                                            <GradientStop Color="#FFE5E5E5" Offset="1"/>
                                            <GradientStop Color="#FF0C0B0B" Offset="0.703"/>
                                        </LinearGradientBrush>
                                    </ComboBox.Background>
                                    <ComboBoxItem Content="Standard"/>
                                    <ComboBoxItem Content="Advanced"/>
                                    <ComboBoxItem Content="Legacy"/>
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="EBR Color Mapping" Foreground="{DynamicResource TextSecondary}" Margin="0,0,0,5"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Border Width="40" Height="35" Background="#FF0000" CornerRadius="4" Margin="0,0,10,0"/>
                                    <TextBox Grid.Column="1" Text="#FF0000" Background="{DynamicResource BgInput}" Foreground="{DynamicResource TextSecondary}" BorderBrush="{DynamicResource BorderColor}" Padding="10,5" Height="35"/>
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- YOLO Config -->
                <Border Background="{DynamicResource BgPanel}" CornerRadius="8" Padding="20" Margin="0,0,0,20" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="YOLO Model Configuration" FontSize="18" FontWeight="Bold" Foreground="#C084FC" Margin="0,0,0,15"/>
                        <TextBlock Text="YOLO Weights File (.pt)" Foreground="{DynamicResource TextSecondary}" Margin="0,0,0,5"/>
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="txtModelPath" Background="{DynamicResource BgInput}" Foreground="White" BorderBrush="{DynamicResource BorderColor}" Padding="10" Height="35" IsReadOnly="True"/>
                            <Button Grid.Column="1" Content="BROWSE" Margin="10,0,0,0" Background="{DynamicResource BorderColor}" Click="btnBrowseModel_Click"/>
                        </Grid>
                        <TextBlock Text="Data Config (.yaml)" Foreground="{DynamicResource TextSecondary}" Margin="0,0,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="txtYamlPath" Background="{DynamicResource BgInput}" Foreground="White" BorderBrush="{DynamicResource BorderColor}" Padding="10" Height="35" IsReadOnly="True"/>
                            <Button Grid.Column="1" Content="BROWSE" Margin="10,0,0,0" Background="{DynamicResource BorderColor}" Click="btnBrowseYaml_Click"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- IC Management -->
                <Border Background="{DynamicResource BgPanel}" CornerRadius="8" Padding="20" Margin="0,0,0,20" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="IC Type Management" FontSize="18" FontWeight="Bold" Foreground="{DynamicResource Success}" Margin="0,0,0,15"/>
                        <Border Background="#0F172A" CornerRadius="4" Padding="10" Margin="0,0,0,15" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="50"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="IC Name" FontSize="10" Foreground="{DynamicResource TextSecondary}" Width="134"/>
                                    <TextBox x:Name="txtNewICName" Background="{DynamicResource BgInput}" Foreground="White" BorderBrush="{DynamicResource BorderColor}" Height="30" Width="132"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" Margin="28,0,0,0">
                                    <TextBlock Text="Count" FontSize="10" Foreground="{DynamicResource TextSecondary}"/>
                                    <TextBox x:Name="txtNewICCount" Text="1" Background="{DynamicResource BgInput}" Foreground="White" BorderBrush="{DynamicResource BorderColor}" Height="30" Width="50" RenderTransformOrigin="0.693,0.859"/>
                                </StackPanel>
                                <StackPanel Grid.Column="4">
                                    <TextBlock Text="Color" FontSize="10" Foreground="{DynamicResource TextSecondary}"/>
                                    <ComboBox x:Name="cbNewICColor" Height="30">
                                        <ComboBox.Background>
                                            <ImageBrush/>
                                        </ComboBox.Background>
                                        <ComboBoxItem Content="Black" IsSelected="True"/>
                                        <ComboBoxItem Content="White"/>
                                        <ComboBoxItem Content="Silver"/>
                                    </ComboBox>
                                </StackPanel>
                                <Button Grid.Column="6" Content="+" Background="{DynamicResource Success}" VerticalAlignment="Top" Height="30" Click="btnAddIC_Click" HorizontalContentAlignment="Center" HorizontalAlignment="Left" Margin="0,13,0,0" Width="50"/>
                            </Grid>
                        </Border>
                        <ListView x:Name="lvICTypes" Height="200" Background="Transparent" BorderThickness="0" Foreground="White">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="200"/>
                                    <GridViewColumn Header="Count" DisplayMemberBinding="{Binding Count}" Width="80"/>
                                    <GridViewColumn Header="Color" DisplayMemberBinding="{Binding Color}" Width="100"/>
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </StackPanel>
                </Border>
                <Button Content="SAVE CONFIGURATION" Height="45" Click="btnSave_Click" Margin="0,20,0,0"/>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>